/* Accordions */

:root {
    --icon-accordion: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1em' height='1em' viewBox='0 0 256 256'%3E%3Cpath fill='%23000' d='m184.49 136.49l-80 80a12 12 0 0 1-17-17L159 128L87.51 56.49a12 12 0 1 1 17-17l80 80a12 12 0 0 1-.02 17'/%3E%3C/svg%3E")
}

@layer components {

    :where(details):not(.unset) {
        width: 100%;
        transition: var(--transition, all 0.1s ease-in-out);

        /* Rotate icon */
        &[open]>summary:before {
            transform: rotate(90deg)
        }

        & [open] summary {
            margin-bottom: calc(var(--spacing) * 4)
        }

        /* Content padding */
        &> :not(summary) {
            padding: var(--spacing-field-padding) 0
        }

        :where(summary) {
            position: relative;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
            color: var(--color-content-stark);
            user-select: none;
            cursor: pointer;
            transition: margin 150s ease-out;

            /* Hide default caret */
            &::marker,
            &::-webkit-details-marker {
                display: none;
                content: ""
            }

            &:hover {
                color: color-mix(in oklch, var(--color-surface-1) 40%, var(--color-content-stark))
            }

            &:active {
                color: color-mix(in oklch, var(--color-surface-1) 50%, var(--color-content-stark))
            }

            /* Add custom icon */
            &:before {
                content: "";
                order: 1;
                width: 1rem;
                height: 1rem;
                background-color: color-mix(in oklch, var(--color-field-surface) 50%, var(--color-field-inverse));
                -webkit-mask-image: var(--icon-accordion);
                mask-image: var(--icon-accordion);
                -webkit-mask-repeat: no-repeat;
                mask-repeat: no-repeat;
                -webkit-mask-size: 100% 100%;
                mask-size: 100% 100%;
                transform: rotate(0);
                transition: 0.25s transform ease
            }
        }
    }
}