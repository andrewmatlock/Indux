/* Typography */

@layer base {

    :where(a, abbr, address, blockquote, code, del, figcaption, h1, h2, h3, h4, h5, h6, ins, label, legend, p, small, cite, q), .h1, .h2, .h3, .h4, .h5, .h6, .paragraph, .small, .caption {
        color: var(--color-content-stark);

        &:where(:has( [x-icon])) {
            display: inline-flex;
            align-items: center;
            
            & [x-icon] {
                margin-inline-end: 0.5ch;
            }
        }

        & span {
            vertical-align: inherit
        }
    }

    :where(h1, h2, h3, h4, h5, h6), .h1, .h2, .h3, .h4, .h5, .h6 {
        font-weight: bolder;
        word-wrap: break-word
    }

    :where(h1, h2, h3, h4), .h1, .h2, .h3, .h4 {
        font-weight: 700;
    }

    :where(h1, h2, h3), .h1, .h2, .h3 {
        letter-spacing: -0.025em
    }

    :where(h1), .h1 {
        font-size: 2.25rem;
        line-height: 1.25
    }

    :where(h2), .h2 {
        font-size: 1.5rem
    }

    :where(h3), .h3 {
        font-size: 1.25rem;
        line-height: 1.4
    }

    :where(h4), .h4 {
        font-size: 1rem
    }

    :where(h5), .h5 {
        font-weight: 600;
        font-size: .875rem;
        line-height: 1rem;
        color: var(--color-content-neutral)
    }

    :where(h6), .h6 {
        font-weight: 600;
        font-size: 0.8125rem;
        line-height: 1.4;
        text-transform: uppercase;
    }

    :where(p), .paragraph {
        line-height: 1.6;
    }

    :where(a:not([role=button]), button.link) {
        text-decoration: underline;
        text-underline-offset: 2px;
        cursor: pointer;
        transition: var(--transition);

        &:hover {
            color: var(--color-content-neutral)
        }

        &:active {
            color: var(--color-content-neutral)
        }
    }

    :where(blockquote) {
        display: block;
        width: 100%;
        max-width: 100%;
        margin: calc(var(--spacing) * 4) 0;
        padding: 0 calc(var(--spacing) * 4);
        color: var(--color-content-stark);
        border-right: none;
        border-left: .25rem solid color-mix(in oklch, var(--color-content-stark) 25%, transparent);
        border-inline-start: 0.25rem solid color-mix(in oklch, var(--color-content-stark) 25%, transparent);
        border-inline-end: none;

        & * {
            color: inherit
        }
    }

    :where(code) {
        display: inline-block;
        width: fit-content;
        height: fit-content;
        padding: 0.5ch 0.75ch;
        font-size: 75%;
        font-weight: 600;
        word-wrap: break-word;
        color: var(--color-content-neutral);
        background-color: color-mix(in oklch, var(--color-content-neutral) 10%, transparent);
        border-radius: calc(var(--radius) / 1.5)
    }

    :where(figcaption), .caption {
        font-size: 0.8125rem;

        & a {
            font-weight: inherit;
            color: inherit
        }
    }

    :where(small), .small {
        font-size: 0.875rem;
        color: var(--color-content-neutral)
    }

    :where(figcaption), .caption {
        color: var(--color-content-neutral)
    }


    :where([x-icon]) {
        display: inline-flex
    }

    :where(ins) {
        text-decoration: none
    }

    :where(kbd) {
        display: inline-block;
        vertical-align: baseline;
        width: fit-content;
        min-width: 1.4rem;
        padding: 0.3rem;
        font-family: inherit;
        font-size: 75%;
        font-weight: 600;
        line-height: 1;
        text-align: center;
        color: var(--color-content-neutral);
        background-color: color-mix(in oklch, var(--color-content-neutral) 10%, transparent);
        border-radius: calc(var(--radius) / 1.5);

        &:not(:last-of-type) {
            margin-right: 1px
        }
    }

    :where(label) {
        width: -moz-fit-content;
        width: fit-content;
        user-select: none
    }

    :where(legend) {
        display: block;
        max-width: 100%;
        white-space: normal
    }

    :where(mark) {
        display: inline-flex;
        justify-content: center;
        align-items: center;
        gap: 0.25rem;
        width: fit-content;
        height: fit-content;
        padding: var(--spacing) calc(var(--spacing) * 1.5);
        font-weight: 500;
        font-size: 0.75rem;
        line-height: 1;
        color: var(--color-content-stark);
        background-color: color-mix(in oklch, var(--color-content-stark) 10%, transparent);
        border-radius: var(--radius);

        /* Solo icons */
        &:has(svg:only-child) {
            padding: var(--spacing) calc(var(--spacing) * 1);
        }
    }

    :where(ol):not(nav ol):not(menu ol) {
        list-style-type: decimal;
    }

    :where(ul):not(nav ul):not(menu ul) {
        list-style-type: disc;
    }

    :where(ol):not(nav ol):not(menu ol),
    :where(ul):not(nav ul):not(menu ul) {
        padding-left: 1.5ch;

        /* Offset items so markers align to the inside frame  */
        & li {
            padding-left: 1ch;

            /* Space out items */
            &:not(:last-of-type) {
                margin-bottom: 1.25ch
            }

            /* Allow icons to replace markers */
            &:has([x-icon]) {
                position: relative;
                display: inherit;
                list-style: none;

                & [x-icon] {
                    position: absolute;
                    top: 0.45ch;
                    left: -1.75ch
                }
            }
        }
    }

    /* Nested lists */
    :where(ol, ul):not(nav ol):not(menu ol) ul,
    :where(ol, ul):not(nav ul):not(menu ul) ol {
        margin-top: 1ch
    }

    :where(figure figcaption) {
        margin: calc(var(--spacing) * 2) auto;
        text-align: center
    }

    :where(span) {
        vertical-align: middle
    }
}