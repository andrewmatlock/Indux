---
title: "Persistence"
description: "Persist Alpine.js data across page reloads with localStorage."
icon: "hard-drive"
---

---

## Overview

The persistence plugin automatically saves your Alpine.js data to the browser's localStorage whenever values change, making the values available across page reloads and browser sessions until cleared. All data is stored with the prefix `x-persist-` to keep it organized and separate from other localStorage data.

---

## Usage

Add an [Indux script](/getting-started/setup) to your project, or use the standalone persistence plugin:

```html
<!-- Alpine -->
<script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

<!-- Indux Persistence plugin -->
<script src="https://cdn.jsdelivr.net/npm/indux/dist/indux.persistence.js" defer></script>
```

---

## Basic Persistence

Use the `x-persist` directive to automatically save and restore Alpine.js data:

<Frame>
    <div x-data="{ count: 0 }" x-persist>
        <button x-on:click="count++">Count: <span x-text="count"></span></button>
    </div>
</Frame>

```html
<div x-data="{ count: 0 }" x-persist>
    <button x-on:click="count++">Count: <span x-text="count"></span></button>
</div>
```

The `x-persist` directive automatically generates a unique storage key for your data. When the page reloads, the stored value will automatically restore.

### Optional Custom Keys

You can also provide a custom key for more control:

<Frame>
    <div x-data="{ name: 'John' }" x-persist:user-name>
        <input x-model="name" placeholder="Enter name" />
        <p>Hello, <span x-text="name"></span>!</p>
    </div>
</Frame>

```html
<div x-data="{ name: 'John' }" x-persist:user-name>
    <input x-model="name" placeholder="Enter name" />
    <p>Hello, <span x-text="name"></span>!</p>
</div>
```

### Using Element IDs

You can also use element IDs for predictable keys:

```html
<div id="user-form" x-data="{ email: '', name: '' }" x-persist>
    <!-- Data will be stored as "x-persist-user-form" -->
</div>
```

---

## Persistence Methods

### Directive Usage

<Frame>
    <div x-data="{ name: 'John' }" x-persist:user-name>
        <input x-model="name" placeholder="Enter name" />
        <p>Hello, <span x-text="name"></span>!</p>
    </div>
</Frame>

```html
<div x-data="{ name: 'John' }" x-persist:user-name>
    <input x-model="name" placeholder="Enter name" />
    <p>Hello, <span x-text="name"></span>!</p>
</div>
```

### Magic Method Usage

Access persistence directly with the `$persist` magic method:

<Frame>
    <div x-data>
        <button x-on:click="$persist.set('last-visit', new Date().toISOString())">
            Save Visit Time
        </button>
        <p>Last visit: <span x-text="$persist.get('last-visit')"></span></p>
        <button x-on:click="$persist.has('last-visit') ? 'Visited before' : 'First visit'">
            Check History
        </button>
    </div>
</Frame>

```html
<div x-data>
    <button @click="$persist.set('last-visit', new Date().toISOString())">
        Save Visit Time
    </button>
    <p>Last visit: <span x-text="$persist.get('last-visit')"></span></p>
    <button @click="$persist.has('last-visit') ? 'Visited before' : 'First visit'">
        Check History
    </button>
</div>
```

---

## Storage Management

### Clear All Data

Clear all persisted data with the `x-persist:clear` modifier:

<Frame>
    <button x-persist:clear>Clear All Data</button>
</Frame>

```html
<button x-persist:clear>Clear All Data</button>
```

Or use the magic method:

```html
<button @click="$persist.clear()">Clear All Data</button>
```

### Check for Stored Data

Test if data exists before using it:

<Frame>
    <div>
        <div x-show="$persist.has('user-preferences')">
            <p>Welcome back! Your preferences are loaded.</p>
        </div>
        <div x-show="!$persist.has('user-preferences')">
            <p>First time here? Set up your preferences.</p>
        </div>
    </div>
</Frame>

```html
<div>
    <div x-show="$persist.has('user-preferences')">
        <p>Welcome back! Your preferences are loaded.</p>
    </div>
    <div x-show="!$persist.has('user-preferences')">
        <p>First time here? Set up your preferences.</p>
    </div>
</div>
```

---