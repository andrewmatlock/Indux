#!/usr/bin/env node

import { downloadFile } from '../src/utils.js';

// Get command from command line arguments
const command = process.argv[2];

if (!command) {
  console.log('Indux CLI - Manage Indux files');
  console.log('');
  console.log('Usage: npx @indux/add <command>');
  console.log('');
  console.log('Commands:');
  console.log('  update                    Update all Indux files (except theme)');
  console.log('  js                        Download indux.js');
  console.log('  css                       Download indux.css');
  console.log('  theme                     Download indux.theme.css');
  console.log('  code                      Download indux.code.css');
  console.log('  quickstart                Download indux.quickstart.js');
  console.log('');
  console.log('Examples:');
  console.log('  npx @indux/add update');
  console.log('  npx @indux/add js');
  console.log('  npx @indux/add css');
  process.exit(1);
}

// Map commands to filenames
const fileMap = {
  'js': 'indux.js',
  'css': 'indux.css',
  'theme': 'indux.theme.css',
  'code': 'indux.code.css',
  'quickstart': 'indux.quickstart.js'
};

if (command === 'update') {
  // Import and run the update command
  const { runUpdate } = await import('../src/update.js');
  await runUpdate();
} else if (fileMap[command]) {
  // Download the specific file
  await downloadFile(fileMap[command]);
} else {
  console.error(`Unknown command: ${command}`);
  console.log('Run "npx @indux/indx" to see available commands.');
  process.exit(1);
}
